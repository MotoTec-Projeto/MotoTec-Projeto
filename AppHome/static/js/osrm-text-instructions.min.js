!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):"object"==typeof exports?exports.OsrmTextInstructions=t():e.OsrmTextInstructions=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(1)),i=r(n(5)),s=r(n(6)),a=n(7),u=n(8);t.default=function(){function e(t,n){var r=this;this.name=t,this.options=n||{},this.options.hooks=this.options.hooks||{},this.options.hooks.token=this.options.hooks.token||function(e,t){return t},this.options.hooks.capitalize=this.options.hooks.capitalize||function(e){return e.slice(0,1).toUpperCase()+e.slice(1)},this.instructions=new(i.default(this.name)),this.tokenize=function(e,t,n){return o.default.call(r,e,t,n)},this.compile=function(e,t,n){return s.default.call(r,e,t,n)},this.getLaneInstruction=function(e,t,n){return a.getLaneInstruction.call(r,e,t,n)},this.getDirection=function(e){return u.getDirection.call(r,e)}}return e.prototype.tokenize=function(){},e.prototype.compile=function(){},e.prototype.getLaneInstruction=function(){},e.prototype.getDirection=function(){},e}()},function(e,t,n){"use strict";var r=n(2),o=n(3),i=n(4);e.exports=function(e,t,n){var s=this;n=n||this.options;var a=e.split(r.tokenize).filter(function(e){return e});return a.map(function(e){var r;if("{"!==e[0]||"}"!==e[e.length-1])return n.hooks.token(e);var a=e.slice(1,-1).split(":"),u=a[0];a.length>1?(r=a[1],i(r,n.hooks)):r=u;var c=t[u];if(void 0!==c)return o(r,c,n.hooks,e,u);if(t[r])return n.hooks.token(e,t[r])}).join("")}},function(e,t){e.exports={tokenize:RegExp("(\\s)?\\{(\\w+)(?::(\\w+))?\\}(\\s)?","g")}},function(e,t){e.exports=function(e,t,n,r,o){try{return n[e](t)}catch(t){throw new Error('invalid hook "'.concat(e,'" for "').concat(o,'"'))}}}},function(e,t){var n=["metric","imperial","ordinalize","direction","modifier"];e.exports=function(e,t){var r=Object.keys(t);if(r.every(function(e){return n.indexOf(e)!==-1}))return!0;throw new Error("invalid hook ".concat(e))}},function(e,t){e.exports=function(e){var t=function(){try{return require("../languages/".concat(e))}catch(t){throw new Error("language ".concat(e," not found"))}}();return t.meta.revision=e,t}},function(e,t,n){"use strict";var r=n(2);e.exports=function(e,t,n){if(!this.instructions[e]){var o=this.instructions.meta.revision.split(".");o.pop(),e=o.join("."),this.instructions[e]||(e="en",console.warn("language ".concat(t.options.language," not found, falling back to en")))}var i=this.instructions[e],s=t.type.toLowerCase(),a=i.meta.arrive;t.maneuver.modifier&&(s+=" "+t.maneuver.modifier.replace(/ /g,""));var u=i[s],c=i.meta.way_name_delimiter||" ",d=t.name,f="";t.destinations&&t.ref?f=t.destinations+" ("+t.ref.split(",").join(", ")+")":t.destinations?f=t.destinations:t.ref&&(f=t.ref.split(",").join(", "));var l,v={way_name:d.split(c).map(this.options.hooks.capitalize).join(c),destinations:f.split(c).map(this.options.hooks.capitalize).join(c),exit:this.options.hooks.ordinalize(t.exits),rotary_name:t.rotary_name?t.rotary_name.split(c).map(this.options.hooks.capitalize).join(c):"",lane_instruction:this.getLaneInstruction(u,t,i),name:t.name.split(c).map(this.options.hooks.capitalize).join(c),modifier:this.options.hooks.modifier(t.maneuver.modifier),direction:this.options.hooks.direction(this.getDirection(t))};switch("arrive"===t.type&&t.maneuver.modifier?u=a[t.maneuver.modifier]:"arrive"===t.type&&(u=a.default),t.type){case"merge":case"fork":case"off ramp":case"on ramp":case"continue":l=u[t.maneuver.modifier]||u.default;break;case"roundabout":case"rotary":u[t.maneuver.modifier]?l=u[t.maneuver.modifier]:(l=u.default,v.exit_number=this.options.hooks.ordinalize(t.maneuver.exit));break;default:l=u}if(!l)throw new Error("Could not find instruction for ".concat(s));var p,h=this;return l.replace(r.tokenize,function(e,t,r,o,i){return(p=v[r])||""===p?t&&i?t+p+i:t?t+p:i?p+i:p:o?h.tokenize(o,v,n):e})}},function(e,t){t.getLaneInstruction=function(e,t,n){if(!t.intersections||!t.intersections.length||!t.lanes)return"";var r,o,i,s=t.lanes.map(function(e){return e.valid}).indexOf(!0),a=t.intersections[0].lanes;if(!a)return"";if(1===a.length){var u=a[0];r=u.indications,o=r.indexOf(t.maneuver.modifier||"straight"),i=u.valid}else i=s<a.length?(r=(u=a[s]).indications,o=r.indexOf(t.maneuver.modifier||"straight"),u.valid):(s=0,!1);if(void 0===a[s]||!i||o<0)return"";var c=a[s].indications.filter(function(e){return"none"!==e});return n.meta.lane_instructions[c.join(" ")]||""}},function(e,t){var n={0:"north",360:"north",22.5:"nne",45:"ne",67.5:"ene",90:"east",112.5:"ese",135:"se",157.5:"sse",180:"south",202.5:"ssw",225:"sw",247.5:"wsw",270:"west",292.5:"wnw",315:"nw",337.5:"nnw"};t.getDirection=function(e){return n[e.maneuver.bearing_after]||""}}])});